(ns user)

(def board "
    __________                  __________                  __________                  __________                  __________
   /   S10    \\                /   S12    \\                /   S14    \\                /   S16    \\                /   S18    \\
  /            \\              /            \\              /            \\              /            \\              /            \\
 / S10-Line1--- \\            /              \\            /              \\            /              \\            /              \\            
/ S10-Line2----- \\__________/                \\__________/                \\__________/                \\__________/                \\
\\ S10-Line3----- /   S11    \\                /   S13    \\                /   S15    \\                /   S17    \\                /
 \\ S10-Line4--- /            \\              /            \\              /            \\              /            \\              /
  \\ S10-Line5- /              \\            /              \\            /              \\            /              \\            /
   \\__________/                \\__________/                \\__________/                \\__________/                \\__________/
   /   S20    \\                /   S22    \\                /   S24    \\                /   S26    \\                /   S28    \\
  /            \\              /            \\              /            \\              /            \\              /            \\
 /              \\            /              \\            /              \\            /              \\            /              \\            
/                \\__________/                \\__________/                \\__________/                \\__________/                \\
\\                /   S21    \\                /   S23    \\                /   S25    \\                /   S27    \\                /
 \\              /            \\              /            \\              /            \\              /            \\              /
  \\            /              \\            /              \\            /              \\            /              \\            /
   \\__________/                \\__________/                \\__________/                \\__________/                \\__________/
   /   S30    \\                /   S32    \\                /   S34    \\                /   S36    \\                /   S38    \\
  /            \\              /            \\              /            \\              /            \\              /            \\
 /              \\            /              \\            /              \\            /              \\            /              \\            
/                \\__________/                \\__________/                \\__________/                \\__________/                \\
\\                /   S31    \\                /   S33    \\                /   S35    \\                /   S37    \\                /
 \\              /            \\              /            \\              /            \\              /            \\              /
  \\            /              \\            /              \\            /              \\            /              \\            /
   \\__________/                \\__________/                \\__________/                \\__________/                \\__________/
   /   S40    \\                /   S42    \\                /   S44    \\                /   S46    \\                /   S48    \\
  /            \\              /            \\              /            \\              /            \\              /            \\
 /              \\            /              \\            /              \\            /              \\            /              \\            
/                \\__________/                \\__________/                \\__________/                \\__________/                \\
\\                /   S41    \\                /   S43    \\                /   S45    \\                /   S47    \\                /
 \\              /            \\              /            \\              /            \\              /            \\              /
  \\            /              \\            /              \\            /              \\            /              \\            /
   \\__________/                \\__________/                \\__________/                \\__________/                \\__________/
   /   S50    \\                /   S52    \\                /   S54    \\                /   S56    \\                /   S58    \\
  /            \\              /            \\              /            \\              /            \\              /            \\
 /              \\            /              \\            /              \\            /              \\            /              \\            
/                \\__________/                \\__________/                \\__________/                \\__________/                \\
\\                /   S51    \\                /   S53    \\                /   S55    \\                /   S57    \\                /
 \\              /            \\              /            \\              /            \\              /            \\              /
  \\            /              \\            /              \\            /              \\            /              \\            /
   \\__________/                \\__________/                \\__________/                \\__________/                \\__________/
   /   S60    \\                /   S62    \\                /   S64    \\                /   S66    \\                /   S68    \\
  /            \\              /            \\              /            \\              /            \\              /            \\
 /              \\            /              \\            /              \\            /              \\            /              \\            
/                \\__________/                \\__________/                \\__________/                \\__________/                \\
\\                /   S61    \\                /   S63    \\                /   S65    \\                /   S67    \\                /
 \\              /            \\              /            \\              /            \\              /            \\              /
  \\            /              \\            /              \\            /              \\            /              \\            /
   \\__________/                \\__________/                \\__________/                \\__________/                \\__________/
   /   S70    \\                /   S72    \\                /   S74    \\                /   S76    \\                /   S78    \\
  /            \\              /            \\              /            \\              /            \\              /            \\
 /              \\            /              \\            /              \\            /              \\            /              \\            
/                \\__________/                \\__________/                \\__________/                \\__________/                \\
\\                /          \\                /          \\                /          \\                /          \\                /
 \\              /            \\              /            \\              /            \\              /            \\              /
  \\            /              \\            /              \\            /              \\            /              \\            /
   \\__________/                \\__________/                \\__________/                \\__________/                \\__________/
")

;action:
; - move {:location S70 :sec-left 34}
;(Only 1 action at a time. Penelty before moving)

(def game (atom {
  :ticks 0
  :player1 {:sc1 {:loc "S62"
                  :action {:type :move :loc "S53" :time 1691308343923}}}
  }))

(defn command
  [s]
  (cond (= s "map") (println board)
        true (println "OUT:" s)))

(defn tick
  [g]
  (-> g
     (update :ticks inc)
  ; Move units (First without restrictions)
  ;   tick-move-units
  ; Gather actions
  ; Apply Actions (Gather first in case two units shoot each other)
  ; Remove dead
  ))

(defn tick!
  []
  (swap! game tick))

(def running (atom false))
(defn game-loop!
  []
  (when (not @running)
    (reset! running true)
    (future 
      (while @running
        (tick!)
        (Thread/sleep (* 5 1000))))))


(defn -main
  [& args]
  (loop []
    (let [input (read-line)]
      (if (= input "quit")
        (println "Quitting")
        (do
          (command input)
          (recur))))))

(-main)
